#[member]
ETCD_NAME="<%= @instance_id %>"
ETCD_DATA_DIR="/var/lib/etcd/<%= @etcd_cluster_name %>.etcd"
ETCD_WAL_DIR=""
ETCD_SNAPSHOT_COUNTER="10000"
ETCD_HEARTBEAT_INTERVAL="100"
ETCD_ELECTION_TIMEOUT="1000"
ETCD_LISTEN_CLIENT_URLS="http://0.0.0.0:<%= @client_port %>"
ETCD_ADVERTISE_CLIENT_URLS="http://<%= @ipaddress %>:<%= @client_port %>"
ETCD_MAX_SNAPSHOTS="5"
ETCD_MAX_WALS="5"
#
#[proxy]
ETCD_PROXY="off"
ETCD_PROXY_FAILURE_WAIT="5000"
ETCD_PROXY_REFRESH_INTERVAL="30000"
ETCD_PROXY_DIAL_TIMEOUT="1000"
ETCD_PROXY_WRITE_TIMEOUT="5000"
ETCD_PROXY_READ_TIMEOUT="0"
#

#[cluster]
ETCD_LISTEN_PEER_URLS="http://0.0.0.0:<%= @peer_port %>"
ETCD_INITIAL_ADVERTISE_PEER_URLS="http://<%= @ipaddress %>:<%= @peer_port%>"
ETCD_INITIAL_CLUSTER="<%= puts `REGION=$(curl -s http://169.254.169.254/latest/dynamic/instance-identity/document | grep region | awk -F\\" \'{print $4}\'); aws ec2 describe-instances --filters "Name=tag:Role,Values=etcd-node" "Name=tag:Cluster,Values=cluster1" --query 'Reservations[].Instances[].[ InstanceId, PrivateIpAddress]' --region=$REGION --output=text | awk '{ OFS="="; ORS="," } { print $1, $2 }'` %>"
ETCD_INITIAL_CLUSTER_STATE="new"
ETCD_INITIAL_CLUSTER_TOKEN="etcd-cluster-<%= @etcd_cluster_name %>"
ETCD_DISCOVERY_FALLBACK="proxy"
ETCD_STRICT_RECONFIG_CHECK=false
#

#[security]
ETCD_CLIENT_CERT_AUTH=false
ETCD_PEER_CLIENT_CERT_AUTH=false
#
#[logging]
ETCD_DEBUG=false
